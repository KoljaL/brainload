<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Brainload Form</title>
    <meta http-equiv="Cache-control" content="No-Cache">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="https://dev.rasal.de/brainload/templates/images/brain.png">
    <!-- <link rel="stylesheet" href="pure.css"> -->
    <link rel="stylesheet" href="style.css">
    <!-- <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css" /> -->
    <script src="js/formtoobj.js"></script>
    <script src="js/md5.js"></script>
    <script src="js/debugHelper.js"></script>
</head>

<body>
    <div id=formcontent></div>
    <div id=overlay></div>
    <div id=content>
        <div id="header">

            <div id=profil><a href="#profil" class=blueFont>Profil</a></div>
            <div id=mood><a href="#mood" class=orangeFont>Mood</a></div>
            <div id=chart><span href="#chart" class=greenFont>Chart</span></div>
            <div id=datalink></div>
            <div id=dellocal><a href="#dellocal" class=redFont>X</a></div>


        </div>
        <form id=ProfilForm autocomplete="off">
            <fieldset>
                <legend>Profil</legend>



                <div class="profil_1">
                    <div class="name">
                        <label for="P_Name">Name</label>
                        <input type="text" id="P_Name" name=Name value=ADXS>
                    </div>
                    <div class="password">
                        <label for="P_Password">Passwort</label>
                        <input type="password" id="P_Password" name=Passwort value=ADXS>
                    </div>
                    <div class="freigeben">
                        <label id="Daten freigeben">Daten</label>
                        <input type=checkbox class=hidden id=P_Freigeben name=Freigeben checked>
                        <label class="buttonlabel zyklus" for=P_Freigeben>freigeben</label>
                    </div>
                </div>


                <div class="profil_1">
                    <div class="alter">
                        <label for="P_Alter">Geburtsjahr</label>
                        <input type="number" id="P_Alter" name=Alter placeholder=1982>
                    </div>
                    <div class="geschlecht">
                        <label for="P_Geschlecht">Geschlecht</label>
                        <select id="P_Geschlecht" name=Geschlecht>
                            <option disabled selected hidden></option>
                            <option>divers</option>
                            <option>weiblich</option>
                            <option>m√§nnlich</option>
                            <option>keine Angabe</option>
                        </select>
                    </div>
                    <div class="zyklus">
                        <label id=Zyklus>Zyklus</label>
                        <input type=checkbox class=hidden id=P_Zyklus name=Zyklus>
                        <label class="buttonlabel zyklus" for=P_Zyklus>abfragen</label>
                    </div>
                </div>


                <div class="profil_2">
                    <div class="subtyp">
                        <label for="P_Subtyp">ADHS-Subtyp</label>
                        <select id="P_Subtyp" name=Subtyp>
                        <option disabled selected hidden></option>
                        <option>ADHS</option>
                        <option>ADS</option>
                        <option>Mischtyp</option>
                        <option>keine Angabe</option>
                    </select>
                    </div>
                    <div class="diagnosen">
                        <label for="P_Diagnosen">weitere Diagnosen</label>
                        <input type="text" id="P_Diagnosen" name=Diagnosen>
                    </div>
                </div>
                <label class="" for=situation>Wirkungen abfragen: </label>
                <div id=WirkungCheckboxes>


                </div>
                <div class="kommentar profil">
                    <label class="itemLabel comment" for=P_Kommentar>Kommentar: </label>
                    <textarea name="P_Kommentar" id="P_Kommentar"></textarea>
                </div>
                <br>
                <button type="submit" id=validate>Absenden</button>
            </fieldset>
        </form>


        <form id=MoodForm autocomplete="off">
            <fieldset>
                <legend>How do you feel?</legend>

                <div id=Medikation_0>
                    <div class="medikation">
                        <div class="medikament">
                            <label for="M_Medikament[0]">Medikament</label>
                            <select id="M_Medikament[0]" name=Medikation[0][Medikament]>
                                <option disabled selected hidden></option>
                                <option>Attentin</option>
                                <option>Elvanse</option>
                                <option>Elvanse Adult</option>
                                <option>Ritalin (unretardiert)</option>
                                <option>Medikinet (unretardiert)</option>
                                <option>Ritalin Retard</option>
                                <option>Medikinet Retard</option>
                                <option>Equasym</option>
                                <option>Ritalin Adult</option>
                                <option>Medikinet Adult</option>
                                <option>Kinecteen</option>
                                <option>Concerta</option>
                                <option>Strattera</option>
                                <option>Intuniv </option> 
                            </select>
                        </div>
                        <div class="dosierung">
                            <label for="M_Dosierung[0]">Dosierung</label>
                            <select id="M_Dosierung[0]" name=Medikation[0][Dosierung]>
                                <option disabled selected hidden></option>
                                <option>2.5 mg</option>
                                <option>5 mg</option>
                                <option>10 mg</option>
                                <option>20 mg</option>
                                <option>30 mg</option>
                                <option>40 mg</option>
                                <option>50 mg</option>
                                <option>60 mg</option>
                                <option>70 mg</option>
                                <option>80 mg</option>
                            </select>
                        </div>
                        <div class="zeitpunkt">
                            <label for="M_Zeitpunkt[0]">Zeit</label>
                            <input type="time" id="M_Zeitpunkt[0]" name=Medikation[0][Zeitpunkt]>
                        </div>

                    </div>


                    <details>
                        <summary class=SpoilerMedikation>weitere Angaben</summary>
                        <div class=medikation>
                            <div class="seitwann">
                                <label for="M_SeitWann[0]">seit wann</label>
                                <input type="date" id="M_SeitWann[0]" name=Medikation[0][SeitWann]>
                            </div>

                            <div class="wirkzeit">
                                <label>&nbsp;</label>
                                <input type=checkbox class=hidden id=P_Wirkzeit name=Medikation[0][Wirkzeit]>
                                <label class="buttonlabel wirkzeit" for=P_Wirkzeit>innerhalb der Wirkzeit</label>
                            </div>


                        </div>
                        <div class="kommentar medikament">
                            <label class="itemLabel comment" for=M_Kommentar[0]>Anmerkungen: </label>
                            <textarea id="M_Kommentar[0]" name=Medikation[0][Kommentar]></textarea>
                        </div>
                    </details>



                </div>
                <div id=AddRemoveMedikation class="">
                    <label id=AddMedikation class='plusminus plus' onclick=newMedikation()></label>
                    <label id=RemoveMedikation class='plusminus minus' onclick=delMedikation()></label>
                </div>

                <!-- SITUATIONS -->
                <label class="itemLabel situation" for=situation>Situation: </label>
                <div id=SituationCheckboxes>
                </div>


                <div class="MoodSlider">
                    <label class="itemLabel brainload" for=brainloadSlider>Brainload: </label>
                    <div class=sliderValue id=brainloadSliderOutput></div>
                    <input type="range" min="0" max="100" value="0" step="10" class="slider brainload" id=brainloadSlider name=mood[brainload]>
                    <label class="itemLabel mood" for=moodSlider>Mood: </label>
                    <div class=sliderValue id=moodSliderOutput></div>
                    <input type="range" min="0" max="100" value="0" step="10" class="slider mood" id=moodSlider name=mood[mood]>
                    <label class="itemLabel motivation" for=motivationSlider>Motivation: </label>
                    <div class=sliderValue id=motivationSliderOutput></div>
                    <input type="range" min="0" max="100" value="0" step="10" class="slider motivation" id=motivationSlider name=mood[motivation]>
                </div>
                <div class="kommentar mood">
                    <label class="itemLabel comment" for=comment>Comment: </label>
                    <textarea name="comment" id="comment"></textarea>
                </div>
                <br>
                <br>
                <button type="submit" id=validate class="pure-button pure-button-primary">absenden</button>
            </fieldset>
        </form>
    </div>
    <script></script>
</body>















<script>
    //
    // user verification & data link 
    //
    var DataFreigegeben = document.getElementById('P_Freigeben').checked;
    var localDataNameField = document.getElementById('P_Name');
    var localDataName = md5(localDataNameField.value);
    var datalink = document.getElementById('datalink');

    var ProfilLink = document.getElementById('profil');
    var MoodLink = document.getElementById('mood');
    var DelLocalLink = document.getElementById('dellocal');
    var ProfilForm = document.getElementById('ProfilForm');
    var MoodForm = document.getElementById('MoodForm');
    // all labels
    var labels = document.getElementsByTagName('label')

    // all form elements for populating
    let ProfilFormElements = document.getElementById('ProfilForm').elements;

    // get localData
    var localData = JSON.parse(localStorage.getItem(localDataName)) || new Object({Profil:{},Mood:{}});
    // deb(localData)
    // deb(Object.values(localData.Mood), 'Mood values');
    // deb(Object.entries(localData.Mood), 'Mood entries');
    // var allMoods = Object.values(localData.Mood);
    // for (const mood of allMoods) deb(mood,'allMoods')


</script>
<script src="js/form.js"></script>
<script>
    populateProfilForm();
    populateMoodForm();

    // showMessage(showSize());
</script>











<!-- 








                    <input type=checkbox class=hidden id=value11 name=[situations][0] value=Zuhause>
                    <label class="buttonlabel situation" for=value11>Zuhause</label>
                    <input type=checkbox class=hidden id=value21 name=situations[1] value=Arbeit>
                    <label class="buttonlabel situation" for=value21>Arbeit</label>
                    <input type=checkbox class=hidden id=value31 name=situations[2] value=Park>
                    <label class="buttonlabel situation" for=value31>Park</label>
                    <input type=checkbox class=hidden id=value41 name=situations[3] value=Klo>
                    <label class="buttonlabel situation" for=value41>Klo</label>
                    <input type=checkbox class=hidden id=value51 name=situations[4] value=Bett>
                    <label class="buttonlabel situation" for=value51>Bett</label>
                    <input type=text class=newSituation name=situations[] placeholder='new situation'>





        // var div = document.createElement("DIV");
        // div.innerHTML = message;
        // overlay.appendChild(div);



    
    <input type=checkbox class=hidden id=Unruhe name=wirkung[] value=Unruhe>
    <label class="buttonlabel wirkung" for=Unruhe>Unruhe</label>
    <input type=checkbox class=hidden id=Konzentration name=wirkung[] value=Konzentration>
    <label class="buttonlabel wirkung" for=Konzentration>Konzentration</label>
    <input type=checkbox class=hidden id=Aufmerksamkeit name=wirkung[] value=Aufmerksamkeit>
    <label class="buttonlabel wirkung" for=Aufmerksamkeit>Aufmerksamkeit</label>
    <input type=checkbox class=hidden id=Motivation name=wirkung[] value=Motivation>
    <label class="buttonlabel wirkung" for=Motivation>Motivation</label>
    <input type=checkbox class=hidden id=Auslastung name=wirkung[] value=Auslastung>
    <label class="buttonlabel wirkung" for=Auslastung>Auslastung</label>
    <input type=text class=newSituation name=wirkung[] placeholder='individuelle Wirkungen'>



    // var my_col = document.querySelectorAll("[color]");
    //   my_col.forEach(element => {
    //     element.classList.add(element.getAttribute("color")+"Font");
    //     element.classList.add(element.getAttribute("color")+"Border");
    // })






// FormResultsObject = Object.assign({
//         Profil: FormResultsObject
//     }, FormResultsObject);


// console.log(currentProfil.Profil)

// localData.push(FormResultsObject);
// var localData = Object.assign({}, localDataA);
// console.log(localData)

// FormResultsObject = {
//     Profil: FormResultsObject
// };






function allLocalStorage() {
    var values = '',
        keys = Object.keys(localStorage),
        i = keys.length;

    while (i--) {
        // console.log(keys[i]);
        // console.log(JSON.stringify(keys[i]).length);
        // console.log(localStorage.getItem(keys[i]));
        values += keys[i] + " Length: " + JSON.stringify(keys[i]).length + "<br>";
    }
    var CURRENTstorageSize = Math.round(JSON.stringify(localStorage).length / 1024);
    for (var i = 0, data = "m"; i < 40; i++) {
        try {
            localStorage.setItem("DATA", data);
            data = data + data;
        } catch (e) {
            var MAXstorageSize = Math.round(JSON.stringify(localStorage).length / 1024);
            // console.log("LIMIT REACHED: (" + i + ") " + MAXstorageSize + "K");
            // console.log(JSON.stringify(localStorage).length)
            // console.log(e);
            var div = document.createElement('div');
            div.innerHTML += 'Files:<br> ' + values + '<br>';
            // div.innerHTML += e + "<br><br>";
            div.innerHTML += 'Max LocalStorage Size: <b>' + MAXstorageSize + '</b>K<br>';
            div.id = "storageSize";
            div.style.color = "#000";
            div.style.background = "#ccc";
            div.style.border = "4px solid #000";
            div.style.borderRadius = "14px";
            div.style.width = "max-content";
            div.style.height = "max-content";
            div.style.padding = "1em";
            div.style.position = "fixed";
            div.style.top = "20px";
            div.style.left = "20px";
            document.body.appendChild(div);
            localStorage.removeItem("DATA");
            break;
        }
    }
}







// var showmore = document.getElementById("showmore");
// var showless = document.getElementById("showless");

// showmore.addEventListener("click", function(evt) {
//     document.getElementById("more").style.display = 'inline';
//     document.getElementById("showmore").style.display = 'none';
// });
// showless.addEventListener("click", function(evt) {
//     document.getElementById("more").style.display = 'none';
//     document.getElementById("showmore").style.display = 'inline';
// }); 







<form id=MedikationForm>
            <fieldset>
                <legend>Medikation</legend>

                <div id=Medikation_0>
                    <div class="medikation">
                        <div class="medikament">
                            <label for="M_Medikament">Medikament</label>
                            <select id="M_Medikament" name=Medikation[0][Medikament]>
                                <option disabled selected hidden></option>
                                <option>Elvanse</option>
                                <option>Ritalin </option>
                                <option>Strattera</option>
                            </select>
                        </div>
                        <div class="dosierung">
                            <label for="M_Dosierung">Dosierung</label>
                            <select id="M_Dosierung" name=Medikation[0][Dosierung]>
                                <option disabled selected hidden></option>
                                <option>2.5 mg</option>
                                <option>5 mg</option>
                                <option>10 mg</option>
                                <option>20 mg</option>
                                <option>30 mg</option>
                                <option>40 mg</option>
                            </select>
                        </div>
                        <div class="zeitpunkt">
                            <label for="M_Zeitpunkt">Zeit</label>
                            <input type="time" id="M_Zeitpunkt" name=Medikation[0][Zeitpunkt]>
                        </div>

                    </div>
                </div>
                <div id=addMedikation class="">
                    <label class='plusminus plus' onclick=newMedikation()></label>
                    <label class='plusminus minus' onclick=delMedikation()></label>
                </div>
                <br>
                <button type="submit" id=validate class="pure-button pure-button-primary">Absenden</button>
            </fieldset>
        </form> -->

</html>